!function(a){"function"==typeof define&&define.amd?define(["underscore","backbone","marionette"],a):"undefined"!=typeof exports?module.exports=a(require("underscore"),require("backbone"),require("marionette")):a(_,Backbone,Marionette)}(function(a,b,c){return c.SubRouter=c.AppRouter.extend({constructor:function(d,e){var f={};this.prefix=d=d||"",this.separator=d&&"/"!==d.slice(-1)?"/":"";var g=e&&e.createTrailingSlashRoutes;this.appRoutes&&(e&&e.controller&&(this.controller=e.controller),a.each(this.appRoutes,function(a,b){b?("/"===b.substr(0)&&(b=b.substr(1,b.length)),f[d+this.separator+b]=a,g&&(f[d+this.separator+b+"/"]=a)):(f[d]=a,g&&(f[d+"/"]=a))},this),this.appRoutes=f),c.AppRouter.prototype.constructor.call(this,e);var h;h=b.history.fragment?b.history.getFragment():b.history.getHash(),a.every(this.appRoutes,function(a,c){return h.match(b.Router.prototype._routeToRegExp(c))?(b.history.loadUrl(h),!1):!0},this)},navigate:function(a,b){"/"!=a.substr(0,1)&&0!==a.indexOf(this.prefix.substr(0,this.prefix.length-1))&&(a=this.prefix+(a?this.separator:"")+a),c.AppRouter.prototype.navigate.call(this,a,b)}}),c.SubRouter});